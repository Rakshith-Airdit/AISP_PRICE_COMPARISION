<mvc:View controllerName="com.pricecomp.pricecomp.controller.RFQPriceList"
	xmlns="sap.f"
	xmlns:m="sap.m"
	xmlns:core="sap.ui.core"
	xmlns:mvc="sap.ui.core.mvc"
	xmlns:smartFilterBar="sap.ui.comp.smartfilterbar"
	xmlns:smartTable="sap.ui.comp.smarttable"
	xmlns:sv="sap.ui.comp.smartvariants" height="100%">
	<DynamicPage id="dynamicPage" fitContent="true">
		<header>
			<DynamicPageHeader>
				<smartFilterBar:SmartFilterBar id="smartFilterBar" entitySet="RFQHeaders" enableBasicSearch="false" persistencyKey="UniqueAndStablePersistencyKey">
					<smartFilterBar:controlConfiguration>
						<smartFilterBar:ControlConfiguration key="EventStartDate" index="1" label="Published Date" visibleInAdvancedArea="true" filterType="single" conditionType="{ module: 'sap.ui.comp.config.condition.DateRangeType'}" />
						<smartFilterBar:ControlConfiguration key="EventEndDate" index="2" label="Deadline Date" visibleInAdvancedArea="true" filterType="single" conditionType="{ module: 'sap.ui.comp.config.condition.DateRangeType'}" />
						<!-- <smartFilterBar:ControlConfiguration key="Status" index="3" filterType="multiple" label="Status" visibleInAdvancedArea="true"><smartFilterBar:customControl><m:MultiComboBox id="statusFilterMultiComboBox" selectionChange="onStatusFilterChange"><core:Item key="Action needed" text="Action needed"/><core:Item key="Open" text="Open"/><core:Item key="Completed" text="Completed"/></m:MultiComboBox></smartFilterBar:customControl></smartFilterBar:ControlConfiguration> -->
					</smartFilterBar:controlConfiguration>
				</smartFilterBar:SmartFilterBar>
			</DynamicPageHeader>
		</header>
		<content>
			<smartTable:SmartTable id="smartTableHDR" entitySet="RFQHeaders" smartFilterId="smartFilterBar" persistencyKey="SmartTableHDRKey" enableExport="true" useVariantManagement="true" useTablePersonalisation="true" header="Quotation List" showRowCount="true" enableAutoBinding="true" tableType="ResponsiveTable" demandPopin="true" enableAutoColumnWidth="false" backgroundDesign="Solid" class="sapUiMediumNegativeMarginBeginEnd" beforeRebindTable="onBeforeRebindTable">
				<smartTable:customToolbar>
					<m:OverflowToolbar design="Transparent">
						<m:ToolbarSpacer />
						<m:Button id="idCreateRFQBtn" tooltip="Create RFQ" text="Create RFQ" type="Emphasized" press="onCreateRFQ" />
					</m:OverflowToolbar>
				</smartTable:customToolbar>
				<smartTable:layoutData>
					<m:FlexItemData growFactor="1" baseSize="0%" />
				</smartTable:layoutData>
				<m:Table id="idTableHDR" growing="true" growingThreshold="10" selectionChange="selectionChangeHandlerHDR" noDataText="No Data">
					<m:columns>
						<m:Column>
							<m:customData>
								<core:CustomData key="p13nData" value='{"columnKey":"EventStartDate","leadingProperty":"EventStartDate","sortProperty":"EventStartDate","filterProperty":"EventStartDate","columnIndex":1}'
                                />
							</m:customData>
							<m:Label text="RFQ Published Date" wrapping="false" />
						</m:Column>
						<m:Column>
							<m:customData>
								<core:CustomData key="p13nData" value='{"columnKey":"ReceivedQuotations","leadingProperty":"ReceivedQuotations","sortProperty":"ReceivedQuotations","filterProperty":"ReceivedQuotations","columnIndex":2}'
                                />
							</m:customData>
							<m:Label text="Received Quotations" wrapping="false" />
						</m:Column>
						<m:Column>
							<m:customData>
								<core:CustomData key="p13nData" value='{"columnKey":"EventEndDate","leadingProperty":"EventEndDate","sortProperty":"EventEndDate","filterProperty":"EventEndDate","columnIndex":3}'
                                />
							</m:customData>
							<m:Label text="Time Remaining" wrapping="false" />
						</m:Column>
						<m:Column>
							<m:customData>
								<core:CustomData key="p13nData" value='{"columnKey":"Status","leadingProperty":"Status","sortProperty":"Status","filterProperty":"Status","columnIndex":4}'
                                />
							</m:customData>
							<m:Label text="Status" wrapping="false" />
						</m:Column>
					</m:columns>
					<m:items>
						<m:ColumnListItem type="Navigation" press="onRFQListItemPress" vAlign="Middle">
							<m:cells>
								<m:Text text="{path:'EventStartDate', formatter:'.formatDate'}" />
								<!-- <Record Type="UI.DataField"><PropertyValue Property="Value" Path="ReceivedQuotations"/><PropertyValue Property="Label" String="ReceivedQuotations"/></Record> -->
								<m:Text text="{ReceivedQuotations}" />
								<!-- <m:ProgressIndicator class="sapUiSmallMarginBottom" percentValue="{path:'EventEndDate', formatter:'.calculateProgressPercentage'}" displayValue="{path:'EventEndDate', formatter:'.formatTimeRemaining'}" showValue="true" state="{path:'EventEndDate', formatter:'.formatTimeRemainingState'}" width="300px" /><m:ObjectStatus text="{Status}" state="{path:'Status',formatter:'.formatStatusState'}" inverted="true" class="noWrapText" /> -->
								<m:VBox >
									<m:ProgressIndicator visible="{path:'EventEndDate', formatter:'.showProgressIndicator'}" class="sapUiSmallMarginBottom" percentValue="{path:'EventEndDate', formatter:'.calculateProgressPercentage'}" displayValue="{path:'EventEndDate', formatter:'.formatTimeRemaining'}" showValue="true" state="{path:'EventEndDate', formatter:'.formatTimeRemainingState'}" width="300px" />
									<m:ObjectStatus visible="{path:'EventEndDate', formatter:'.showDeadlinePassedText'}" text="Deadline Passed" state="Error" class="deadlinePassedText"/>
								</m:VBox>
								<m:ObjectStatus text="{Status}" state="{path:'Status',formatter:'.formatStatusState'}" inverted="true" class="noWrapText" />
							</m:cells>
						</m:ColumnListItem>
					</m:items>
				</m:Table>
			</smartTable:SmartTable>
		</content>
	</DynamicPage>
</mvc:View>
